# TS-Iteration-Loop 统一 Conda 环境
# 
# 创建环境: conda env create -f envs/environment.yml
# 更新环境: conda env update -f envs/environment.yml
# 激活环境: conda activate ts-iteration-loop
#
# 注意：PyTorch 需根据 CUDA 版本单独安装
# pip install torch>=2.5.0 torchvision torchaudio --index-url https://download.pytorch.org/whl/cu124

name: ts-iteration-loop
channels:
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main
  - defaults
dependencies:
  - python=3.10
  - pip
  - pip:
      # ===== 核心框架 =====
      - fastapi>=0.104.0
      - uvicorn>=0.24.0
      - pydantic>=2.5.0,<=2.10.6
      - pydantic-settings>=2.1.0
      - gradio>=4.38.0,<=5.31.0
      
      # ===== 数据库与任务队列 =====
      - sqlalchemy>=2.0.0
      - aiosqlite>=0.19.0
      - celery>=5.3.0
      - redis>=5.0.0
      
      # ===== HTTP 客户端 =====
      - httpx>=0.25.0
      - python-multipart>=0.0.6
      - python-jose[cryptography]>=3.3.0
      - sse-starlette
      
      # ===== 数据处理 =====
      - numpy>=1.26.0,<2.0.0
      - pandas>=2.0.0
      - scipy>=1.12.0
      - scikit-learn>=1.4.0
      
      # ===== 时序分析 =====
      - tsdownsample>=0.1.0
      - statsmodels>=0.14.0
      - adtk>=0.6.2
      - kneed>=0.8.0
      - PyWavelets>=1.4.0
      
      # ===== 深度学习核心 =====
      # PyTorch 需单独安装：pip install torch --index-url https://download.pytorch.org/whl/cu124
      - transformers>=4.49.0,<=4.52.4
      - tokenizers>=0.19.0
      - peft>=0.14.0,<=0.15.2
      - bitsandbytes>=0.41.0
      - accelerate>=1.3.0,<=1.7.0
      - sentencepiece>=0.1.99
      - safetensors>=0.4.0
      - huggingface-hub>=0.20.0
      - datasets>=2.16.0,<=3.6.0
      
      # ===== LlamaFactory 训练 =====
      - trl>=0.8.6,<=0.9.6
      - einops
      - fire
      - omegaconf
      - protobuf
      - pyyaml
      
      # ===== IoTDB 数据采集 =====
      - apache-iotdb>=1.3.0
      
      # ===== 可视化 =====
      - matplotlib>=3.7.0
      - seaborn>=0.13.0
      
      # ===== 工具库 =====
      - tqdm>=4.66.0
      - joblib>=1.3.0
      - Pillow>=10.0.0
      - requests>=2.31.0
      - python-dateutil>=2.8.0
      
      # ===== 标注工具 =====
      - flask>=3.0.0
      - flask-cors>=4.0.0
      - openpyxl>=3.0.0
      - werkzeug>=3.0.0
      - PyJWT>=2.8.0
      
      # ===== LlamaFactory 额外依赖 =====
      - tiktoken
      - tyro<0.9.0
      
      # ===== 时序变点检测 =====
      - ruptures>=1.1.0
